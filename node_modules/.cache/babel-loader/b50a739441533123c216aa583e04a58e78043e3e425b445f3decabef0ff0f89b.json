{"ast":null,"code":"import _objectSpread from\"D:/KCSGPT-UI/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useCallback}from\"react\";import ChatHeader from\"../components/chatHeader\";import ChatWindow from\"../components/chatWindow\";import ChatInput from\"../components/chatInput\";import Sidebar from\"../components/sidebar\";import gitaDataRaw from'../data/gita_data.json';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const gitaData=gitaDataRaw.map(v=>({verse:v.VERSE?String(v.VERSE).trim():\"\",devanagari:v.DEVANAGRI?v.DEVANAGRI.trim():\"\",translation:v.ENGLISH?v.ENGLISH.trim():\"\",purport:v.PURPORT?v.PURPORT.trim():\"\"}));const ChatPage=()=>{const[messages,setMessages]=useState([]);const[conversations,setConversations]=useState([]);const[activeId,setActiveId]=useState(null);const[isTyping,setIsTyping]=useState(false);const[isSidebarOpen,setIsSidebarOpen]=useState(true);const[isMobile,setIsMobile]=useState(window.innerWidth<=768);// Sidebar toggle\nconst toggleSidebar=()=>{const newState=!isSidebarOpen;setIsSidebarOpen(newState);if(newState)document.body.classList.add('sidebar-open');else document.body.classList.remove('sidebar-open');};// Handle resize\nuseEffect(()=>{const handleResize=()=>{setIsMobile(window.innerWidth<=768);if(window.innerWidth<=768){setIsSidebarOpen(false);document.body.classList.remove('sidebar-open');}else{setIsSidebarOpen(true);document.body.classList.add('sidebar-open');}};window.addEventListener(\"resize\",handleResize);handleResize();return()=>window.removeEventListener(\"resize\",handleResize);},[]);// Load saved chat\nuseEffect(()=>{try{const saved=localStorage.getItem(\"chat_messages\");const savedConvs=localStorage.getItem(\"chat_conversations\");if(saved)setMessages(JSON.parse(saved));if(savedConvs){const parsedConvs=JSON.parse(savedConvs);setConversations(parsedConvs);if(parsedConvs.length)setActiveId(parsedConvs[parsedConvs.length-1].id);}}catch(_){}},[]);// Save chat\nuseEffect(()=>{try{localStorage.setItem(\"chat_messages\",JSON.stringify(messages));if(activeId){setConversations(prev=>{const next=prev.map(c=>c.id===activeId?_objectSpread(_objectSpread({},c),{},{messages}):c);localStorage.setItem(\"chat_conversations\",JSON.stringify(next));return next;});}}catch(_){}},[messages,activeId]);// QnA logic\nconst answerQuestion=useCallback(question=>{if(!question.trim())return\"Please ask a valid question.\";const lowerQ=question.trim().toLowerCase();// Remove common question words\nconst questionWords=[\"what\",\"where\",\"how\",\"why\",\"who\",\"is\",\"are\",\"the\",\"a\",\"an\",\"of\",\"in\",\"for\"];const queryWords=lowerQ.split(/\\s+/).filter(w=>!questionWords.includes(w)&&w.length>2);if(!queryWords.length)return\"Please ask a clear question.\";// Search in translation + purport\nconst results=gitaData.map(v=>{const text=\"\".concat(v.translation,\" \").concat(v.purport).toLowerCase();let score=0;const sentences=text.split(/[.?!]/);sentences.forEach((s,i)=>{queryWords.forEach(kw=>{if(s.includes(kw))score+=10-i;// earlier sentence = higher score\nconst count=s.split(kw).length-1;score+=count*5;// multiple occurrences increase score\n});});return _objectSpread(_objectSpread({},v),{},{score});}).filter(v=>v.score>0).sort((a,b)=>b.score-a.score).slice(0,5);// top 5\nif(!results.length)return\"I couldn't find a relevant answer for your question.\";// Combine translation + purport (~1000 words)\nlet combined=\"\";for(let r of results){const block=\"\".concat(r.translation,\"\\n\").concat(r.purport?r.purport:'',\"\\n\\n\");if((combined+block).split(/\\s+/).length>1000)break;combined+=block;}return combined.trim();},[]);// Keyword search (only purport)\nconst searchKeyword=useCallback(query=>{if(!query.trim())return\"Please enter a keyword.\";const stopwords=[\"the\",\"is\",\"of\",\"and\",\"a\",\"in\",\"to\",\"with\",\"for\",\"on\",\"by\",\"as\",\"an\",\"at\"];const keywords=query.toLowerCase().split(/\\s+/).filter(w=>!stopwords.includes(w)&&w.length>2);if(!keywords.length)return\"Please provide a meaningful keyword.\";const scored=gitaData.map(v=>{let score=0;const text=v.purport?v.purport.toLowerCase():\"\";const sentences=text.split(/[.?!]/);keywords.forEach(kw=>{sentences.forEach((s,i)=>{if(s.includes(kw))score+=10-i;// earlier sentence = higher score\nconst count=s.split(kw).length-1;score+=count*5;// multiple occurrences increase score\n});});return _objectSpread(_objectSpread({},v),{},{score});});const topResults=scored.filter(v=>v.score>0).sort((a,b)=>b.score-a.score).slice(0,5);if(!topResults.length)return\"No relevant result found for '\".concat(query,\"'.\");let combined=\"\";for(let r of topResults){const block=\"\".concat(r.purport?r.purport:'',\"\\n\\n\");if((combined+block).split(/\\s+/).length>1000)break;combined+=block;}return combined.trim();},[]);// Main search function\nconst searchGita=useCallback(query=>{const trimmed=query.trim().toLowerCase();// Chapter search\nconst chapterMatch=trimmed.match(/^(?:chapter|ch)?\\s*(\\d+)$/i);if(chapterMatch){const chapterNum=chapterMatch[1];const chapterVerses=gitaData.filter(v=>v.verse.startsWith(chapterNum+'.'));if(!chapterVerses.length)return\"\\u274C Chapter \".concat(chapterNum,\" not found.\");return chapterVerses.map(v=>\"\\uD83D\\uDD38 \".concat(v.verse,\"\\n\").concat(v.devanagari,\"\\n\\uD83C\\uDF10 \").concat(v.translation,\"\\n\").concat(v.purport?\"\\uD83D\\uDCDA \".concat(v.purport):'')).join(\"\\n\\n\");}// Verse search\nif(/^\\d+\\.\\d+$/.test(trimmed)){const verse=gitaData.find(v=>v.verse===trimmed);if(!verse)return\"\\u274C Verse \".concat(trimmed,\" not found.\");return\"\\uD83D\\uDCDC Verse \".concat(verse.verse,\"\\n\").concat(verse.devanagari,\"\\n\\uD83C\\uDF10 \").concat(verse.translation,\"\\n\").concat(verse.purport?\"\\uD83D\\uDCDA \".concat(verse.purport):'No purport available.');}// Keyword search first\nconst keywordResults=searchKeyword(trimmed);if(keywordResults&&!keywordResults.startsWith(\"No relevant\"))return keywordResults;// QnA fallback\nreturn answerQuestion(trimmed);},[answerQuestion,searchKeyword]);// Send message\nconst sendMessage=async text=>{if(!text.trim())return;setMessages(prev=>[...prev,{sender:\"user\",text}]);setIsTyping(true);try{const response=searchGita(text);setMessages(prev=>[...prev,{sender:\"bot\",text:response}]);}catch(error){console.error(error);setMessages(prev=>[...prev,{sender:\"bot\",text:\"âš ï¸ An error occurred while processing your request.\"}]);}finally{setIsTyping(false);}};// New chat\nconst handleNewChat=()=>{const id=Date.now().toString();const newConv={id,title:\"New chat\",messages:[],createdAt:Date.now()};const next=[...conversations,newConv];setConversations(next);setActiveId(id);setMessages([]);try{localStorage.setItem(\"chat_messages\",JSON.stringify([]));localStorage.setItem(\"chat_conversations\",JSON.stringify(next));}catch(_){}};// Open conversation\nconst openConversation=id=>{const conv=conversations.find(c=>c.id===id);if(!conv)return;setActiveId(id);setMessages(conv.messages||[]);try{localStorage.setItem(\"chat_messages\",JSON.stringify(conv.messages||[]));}catch(_){}};// Delete conversation\nconst deleteConversation=id=>{if(conversations.length<=1){handleNewChat();return;}const updatedConversations=conversations.filter(conv=>conv.id!==id);setConversations(updatedConversations);if(activeId===id){const nextActive=updatedConversations[updatedConversations.length-1];setActiveId(nextActive.id);setMessages(nextActive.messages||[]);try{localStorage.setItem(\"chat_messages\",JSON.stringify(nextActive.messages||[]));}catch(_){}}try{localStorage.setItem(\"chat_conversations\",JSON.stringify(updatedConversations));}catch(_){}};// Render\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"chat-page\",children:[/*#__PURE__*/_jsx(ChatHeader,{toggleSidebar:toggleSidebar,isSidebarOpen:isSidebarOpen}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-layout\",children:[(isSidebarOpen||!isMobile)&&/*#__PURE__*/_jsx(Sidebar,{isOpen:isSidebarOpen,onNewChat:handleNewChat,conversations:conversations,activeId:activeId,onOpen:openConversation,onDeleteConversation:deleteConversation,onToggle:toggleSidebar}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-main\",children:[/*#__PURE__*/_jsx(ChatWindow,{messages:messages,isTyping:isTyping}),/*#__PURE__*/_jsx(ChatInput,{sendMessage:sendMessage,isTyping:isTyping})]})]})]});};export default ChatPage;","map":{"version":3,"names":["React","useEffect","useState","useCallback","ChatHeader","ChatWindow","ChatInput","Sidebar","gitaDataRaw","jsx","_jsx","jsxs","_jsxs","gitaData","map","v","verse","VERSE","String","trim","devanagari","DEVANAGRI","translation","ENGLISH","purport","PURPORT","ChatPage","messages","setMessages","conversations","setConversations","activeId","setActiveId","isTyping","setIsTyping","isSidebarOpen","setIsSidebarOpen","isMobile","setIsMobile","window","innerWidth","toggleSidebar","newState","document","body","classList","add","remove","handleResize","addEventListener","removeEventListener","saved","localStorage","getItem","savedConvs","JSON","parse","parsedConvs","length","id","_","setItem","stringify","prev","next","c","_objectSpread","answerQuestion","question","lowerQ","toLowerCase","questionWords","queryWords","split","filter","w","includes","results","text","concat","score","sentences","forEach","s","i","kw","count","sort","a","b","slice","combined","r","block","searchKeyword","query","stopwords","keywords","scored","topResults","searchGita","trimmed","chapterMatch","match","chapterNum","chapterVerses","startsWith","join","test","find","keywordResults","sendMessage","sender","response","error","console","handleNewChat","Date","now","toString","newConv","title","createdAt","openConversation","conv","deleteConversation","updatedConversations","nextActive","className","children","isOpen","onNewChat","onOpen","onDeleteConversation","onToggle"],"sources":["D:/KCSGPT-UI/frontend/src/pages/chatPages.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport ChatHeader from \"../components/chatHeader\";\nimport ChatWindow from \"../components/chatWindow\";\nimport ChatInput from \"../components/chatInput\";\nimport Sidebar from \"../components/sidebar\";\nimport gitaDataRaw from '../data/gita_data.json'; \n\nconst gitaData = gitaDataRaw.map(v => ({\n  verse: v.VERSE ? String(v.VERSE).trim() : \"\",\n  devanagari: v.DEVANAGRI ? v.DEVANAGRI.trim() : \"\",\n  translation: v.ENGLISH ? v.ENGLISH.trim() : \"\",\n  purport: v.PURPORT ? v.PURPORT.trim() : \"\"\n}));\n\nconst ChatPage = () => {\n  const [messages, setMessages] = useState([]);\n  const [conversations, setConversations] = useState([]);\n  const [activeId, setActiveId] = useState(null);\n  const [isTyping, setIsTyping] = useState(false);\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\n\n  // Sidebar toggle\n  const toggleSidebar = () => {\n    const newState = !isSidebarOpen;\n    setIsSidebarOpen(newState);\n    if (newState) document.body.classList.add('sidebar-open');\n    else document.body.classList.remove('sidebar-open');\n  };\n\n  // Handle resize\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth <= 768);\n      if (window.innerWidth <= 768) {\n        setIsSidebarOpen(false);\n        document.body.classList.remove('sidebar-open');\n      } else {\n        setIsSidebarOpen(true);\n        document.body.classList.add('sidebar-open');\n      }\n    };\n    window.addEventListener(\"resize\", handleResize);\n    handleResize();\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  // Load saved chat\n  useEffect(() => {\n    try {\n      const saved = localStorage.getItem(\"chat_messages\");\n      const savedConvs = localStorage.getItem(\"chat_conversations\");\n      if (saved) setMessages(JSON.parse(saved));\n      if (savedConvs) {\n        const parsedConvs = JSON.parse(savedConvs);\n        setConversations(parsedConvs);\n        if (parsedConvs.length) setActiveId(parsedConvs[parsedConvs.length - 1].id);\n      }\n    } catch (_) {}\n  }, []);\n\n  // Save chat\n  useEffect(() => {\n    try {\n      localStorage.setItem(\"chat_messages\", JSON.stringify(messages));\n      if (activeId) {\n        setConversations(prev => {\n          const next = prev.map(c => c.id === activeId ? { ...c, messages } : c);\n          localStorage.setItem(\"chat_conversations\", JSON.stringify(next));\n          return next;\n        });\n      }\n    } catch (_) {}\n  }, [messages, activeId]);\n\n  // QnA logic\n  const answerQuestion = useCallback((question) => {\n    if (!question.trim()) return \"Please ask a valid question.\";\n  \n    const lowerQ = question.trim().toLowerCase();\n  \n    // Remove common question words\n    const questionWords = [\"what\", \"where\", \"how\", \"why\", \"who\", \"is\", \"are\", \"the\", \"a\", \"an\", \"of\", \"in\", \"for\"];\n    const queryWords = lowerQ.split(/\\s+/).filter(w => !questionWords.includes(w) && w.length > 2);\n    if (!queryWords.length) return \"Please ask a clear question.\";\n  \n    // Search in translation + purport\n    const results = gitaData\n      .map(v => {\n        const text = `${v.translation} ${v.purport}`.toLowerCase();\n        let score = 0;\n        const sentences = text.split(/[.?!]/);\n        sentences.forEach((s, i) => {\n          queryWords.forEach(kw => {\n            if (s.includes(kw)) score += 10 - i;       // earlier sentence = higher score\n            const count = s.split(kw).length - 1;\n            score += count * 5;                        // multiple occurrences increase score\n          });\n        });\n        return { ...v, score };\n      })\n      .filter(v => v.score > 0)\n      .sort((a, b) => b.score - a.score)\n      .slice(0, 5); // top 5\n  \n    if (!results.length) return `I couldn't find a relevant answer for your question.`;\n  \n    // Combine translation + purport (~1000 words)\n    let combined = \"\";\n    for (let r of results) {\n      const block = `${r.translation}\\n${r.purport ? r.purport : ''}\\n\\n`;\n      if ((combined + block).split(/\\s+/).length > 1000) break;\n      combined += block;\n    }\n  \n    return combined.trim();\n  }, []);\n\n  // Keyword search (only purport)\n  const searchKeyword = useCallback((query) => {\n    if (!query.trim()) return \"Please enter a keyword.\";\n\n    const stopwords = [\"the\",\"is\",\"of\",\"and\",\"a\",\"in\",\"to\",\"with\",\"for\",\"on\",\"by\",\"as\",\"an\",\"at\"];\n    const keywords = query.toLowerCase().split(/\\s+/).filter(w => !stopwords.includes(w) && w.length > 2);\n    if (!keywords.length) return \"Please provide a meaningful keyword.\";\n\n    const scored = gitaData.map(v => {\n      let score = 0;\n      const text = v.purport ? v.purport.toLowerCase() : \"\";\n      const sentences = text.split(/[.?!]/);\n      keywords.forEach(kw => {\n        sentences.forEach((s, i) => {\n          if (s.includes(kw)) score += 10 - i; // earlier sentence = higher score\n          const count = s.split(kw).length - 1;\n          score += count * 5; // multiple occurrences increase score\n        });\n      });\n      return { ...v, score };\n    });\n\n    const topResults = scored.filter(v => v.score > 0)\n                             .sort((a, b) => b.score - a.score)\n                             .slice(0, 5);\n\n    if (!topResults.length) return `No relevant result found for '${query}'.`;\n\n    let combined = \"\";\n    for (let r of topResults) {\n      const block = `${r.purport ? r.purport : ''}\\n\\n`;\n      if ((combined + block).split(/\\s+/).length > 1000) break;\n      combined += block;\n    }\n\n    return combined.trim();\n  }, []);\n\n  // Main search function\n  const searchGita = useCallback((query) => {\n    const trimmed = query.trim().toLowerCase();\n\n    // Chapter search\n    const chapterMatch = trimmed.match(/^(?:chapter|ch)?\\s*(\\d+)$/i);\n    if (chapterMatch) {\n      const chapterNum = chapterMatch[1];\n      const chapterVerses = gitaData.filter(v => v.verse.startsWith(chapterNum + '.'));\n      if (!chapterVerses.length) return `âŒ Chapter ${chapterNum} not found.`;\n      return chapterVerses.map(v => \n        `ðŸ”¸ ${v.verse}\\n${v.devanagari}\\nðŸŒ ${v.translation}\\n${v.purport ? `ðŸ“š ${v.purport}` : ''}`\n      ).join(\"\\n\\n\");\n    }\n\n    // Verse search\n    if (/^\\d+\\.\\d+$/.test(trimmed)) {\n      const verse = gitaData.find(v => v.verse === trimmed);\n      if (!verse) return `âŒ Verse ${trimmed} not found.`;\n      return `ðŸ“œ Verse ${verse.verse}\\n${verse.devanagari}\\nðŸŒ ${verse.translation}\\n${verse.purport ? `ðŸ“š ${verse.purport}` : 'No purport available.'}`;\n    }\n\n    // Keyword search first\n    const keywordResults = searchKeyword(trimmed);\n    if (keywordResults && !keywordResults.startsWith(\"No relevant\")) return keywordResults;\n\n    // QnA fallback\n    return answerQuestion(trimmed);\n  }, [answerQuestion, searchKeyword]);\n\n  // Send message\n  const sendMessage = async (text) => {\n    if (!text.trim()) return;\n\n    setMessages(prev => [...prev, { sender: \"user\", text }]);\n    setIsTyping(true);\n\n    try {\n      const response = searchGita(text);\n      setMessages(prev => [...prev, { sender: \"bot\", text: response }]);\n    } catch (error) {\n      console.error(error);\n      setMessages(prev => [...prev, { sender: \"bot\", text: \"âš ï¸ An error occurred while processing your request.\" }]);\n    } finally {\n      setIsTyping(false);\n    }\n  };\n\n  // New chat\n  const handleNewChat = () => {\n    const id = Date.now().toString();\n    const newConv = { id, title: \"New chat\", messages: [], createdAt: Date.now() };\n    const next = [...conversations, newConv];\n    setConversations(next);\n    setActiveId(id);\n    setMessages([]);\n    try {\n      localStorage.setItem(\"chat_messages\", JSON.stringify([]));\n      localStorage.setItem(\"chat_conversations\", JSON.stringify(next));\n    } catch (_) {}\n  };\n\n  // Open conversation\n  const openConversation = (id) => {\n    const conv = conversations.find(c => c.id === id);\n    if (!conv) return;\n    setActiveId(id);\n    setMessages(conv.messages || []);\n    try {\n      localStorage.setItem(\"chat_messages\", JSON.stringify(conv.messages || []));\n    } catch (_) {}\n  };\n\n  // Delete conversation\n  const deleteConversation = (id) => {\n    if (conversations.length <= 1) {\n      handleNewChat();\n      return;\n    }\n\n    const updatedConversations = conversations.filter(conv => conv.id !== id);\n    setConversations(updatedConversations);\n\n    if (activeId === id) {\n      const nextActive = updatedConversations[updatedConversations.length - 1];\n      setActiveId(nextActive.id);\n      setMessages(nextActive.messages || []);\n      try {\n        localStorage.setItem(\"chat_messages\", JSON.stringify(nextActive.messages || []));\n      } catch (_) {}\n    }\n\n    try {\n      localStorage.setItem(\"chat_conversations\", JSON.stringify(updatedConversations));\n    } catch (_) {}\n  };\n\n  // Render\n  return (\n    <div className=\"chat-page\">\n      <ChatHeader toggleSidebar={toggleSidebar} isSidebarOpen={isSidebarOpen} />\n      <div className=\"chat-layout\">\n        {(isSidebarOpen || !isMobile) && (\n          <Sidebar \n            isOpen={isSidebarOpen} \n            onNewChat={handleNewChat}\n            conversations={conversations} \n            activeId={activeId} \n            onOpen={openConversation}\n            onDeleteConversation={deleteConversation}\n            onToggle={toggleSidebar}\n          />\n        )}\n        <div className=\"chat-main\">\n          <ChatWindow messages={messages} isTyping={isTyping} />\n          <ChatInput sendMessage={sendMessage} isTyping={isTyping} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}